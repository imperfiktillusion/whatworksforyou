
<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Wellington Wind Speeds</title>
  <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
</head>
<body style="font-family:Arial, sans-serif; margin:40px;">
  <h2>Wellington Airport - Monthly Mean Wind Speeds</h2>
  <div id="chart" style="width:100%;height:600px;"></div>
  <script>
    var data = [{'date': '2010-01-01', 'wind': 72.0}, {'date': '2010-02-01', 'wind': 17.0}, {'date': '2010-03-01', 'wind': 34.0}, {'date': '2010-04-01', 'wind': 27.0}, {'date': '2010-05-01', 'wind': 171.0}, {'date': '2010-06-01', 'wind': 140.0}, {'date': '2010-07-01', 'wind': 92.0}, {'date': '2010-08-01', 'wind': 166.0}, {'date': '2010-09-01', 'wind': 152.0}, {'date': '2010-10-01', 'wind': 72.0}, {'date': '2010-11-01', 'wind': 21.0}, {'date': '2010-12-01', 'wind': 91.0}, {'date': '2011-01-01', 'wind': 66.0}, {'date': '2011-02-01', 'wind': 18.0}, {'date': '2011-03-01', 'wind': 77.0}, {'date': '2022-06-01', 'wind': 212.4}, {'date': '2022-07-01', 'wind': 219.4}, {'date': '2022-08-01', 'wind': 233.3}, {'date': '2022-10-01', 'wind': 55.7}, {'date': '2022-11-01', 'wind': 103.7}, {'date': '2022-12-01', 'wind': 105.8}, {'date': '2023-01-01', 'wind': 115.4}, {'date': '2023-02-01', 'wind': 153.9}, {'date': '2023-03-01', 'wind': 91.2}, {'date': '2023-04-01', 'wind': 120.7}, {'date': '2023-05-01', 'wind': 194.7}, {'date': '2023-06-01', 'wind': 70.3}, {'date': '2023-07-01', 'wind': 107.7}, {'date': '2023-08-01', 'wind': 122.1}, {'date': '2023-10-01', 'wind': 57.8}, {'date': '2023-11-01', 'wind': 74.2}, {'date': '2023-12-01', 'wind': 53.4}, {'date': '2024-01-01', 'wind': 24.4}, {'date': '2024-02-01', 'wind': 24.4}, {'date': '2024-03-01', 'wind': 35.0}, {'date': '2024-04-01', 'wind': 69.4}, {'date': '2024-05-01', 'wind': 78.6}, {'date': '2024-06-01', 'wind': 68.9}, {'date': '2024-07-01', 'wind': 96.7}, {'date': '2024-10-01', 'wind': 136.9}, {'date': '2024-11-01', 'wind': 41.3}, {'date': '2025-01-01', 'wind': 86.7}, {'date': '2025-02-01', 'wind': 23.6}, {'date': '2025-05-01', 'wind': 163.5}, {'date': '2025-06-01', 'wind': 174.5}];

    var dates = data.map(d => d.date);
    var winds = data.map(d => d.wind);

    var trace1 = {
      x: dates,
      y: winds,
      mode: 'lines',
      name: 'Monthly Mean Wind Speed'
    };

    // 12-month moving average
    function movingAvg(arr, windowSize) {
      let result = [];
      for (let i = 0; i < arr.length; i++) {
        if (i < windowSize - 1) {
          result.push(null);
        } else {
          let subset = arr.slice(i - windowSize + 1, i + 1);
          let sum = subset.reduce((a,b) => a + b, 0);
          result.push(sum / windowSize);
        }
      }
      return result;
    }

    var trace2 = {
      x: dates,
      y: movingAvg(winds, 12),
      mode: 'lines',
      name: '12-Month Moving Average',
      line: {color: 'red'}
    };

    var layout = {
      title: 'Monthly Wind Speeds at Wellington Airport',
      xaxis: {title: 'Date'},
      yaxis: {title: 'Wind Speed (units as in source data)'}
    };

    Plotly.newPlot('chart', [trace1, trace2], layout);
  </script>
</body>
</html>
