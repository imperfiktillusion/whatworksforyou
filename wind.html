<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Wellington Monthly Wind Speeds (Embedded Data)</title>
  <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
</head>
<body style="font-family:Arial, sans-serif; margin:20px;">
  <h2>Wellington (Airport) â€” Monthly Mean Wind Speeds (Embedded Data)</h2>
  <div id="chart" style="width:100%;max-width:1200px;height:600px;"></div>

  <script>
    // Embedded sample data: a few years for demonstration
    // Replace / extend with full dataset when available
    const data = [
      { date: "2020-01-01", wspd: 27.1 },
      { date: "2020-02-01", wspd: 25.8 },
      { date: "2020-03-01", wspd: 23.4 },
      { date: "2020-04-01", wspd: 22.0 },
      { date: "2020-05-01", wspd: 25.5 },
      { date: "2020-06-01", wspd: 28.2 },
      { date: "2020-07-01", wspd: 30.3 },
      { date: "2020-08-01", wspd: 29.7 },
      { date: "2020-09-01", wspd: 26.6 },
      { date: "2020-10-01", wspd: 24.1 },
      { date: "2020-11-01", wspd: 23.9 },
      { date: "2020-12-01", wspd: 25.2 },
      { date: "2021-01-01", wspd: 26.5 },
      { date: "2021-02-01", wspd: 24.7 },
      { date: "2021-03-01", wspd: 23.8 },
      { date: "2021-04-01", wspd: 22.9 },
      { date: "2021-05-01", wspd: 26.8 },
      { date: "2021-06-01", wspd: 29.1 },
      { date: "2021-07-01", wspd: 31.5 },
      { date: "2021-08-01", wspd: 30.9 },
      { date: "2021-09-01", wspd: 27.8 },
      { date: "2021-10-01", wspd: 25.3 },
      { date: "2021-11-01", wspd: 24.8 },
      { date: "2021-12-01", wspd: 26.0 },
      { date: "2022-01-01", wspd: 27.4 },
      { date: "2022-02-01", wspd: 25.9 },
      { date: "2022-03-01", wspd: 24.0 },
      { date: "2022-04-01", wspd: 22.7 },
      { date: "2022-05-01", wspd: 27.1 },
      { date: "2022-06-01", wspd: 30.0 },
      { date: "2022-07-01", wspd: 32.2 },
      { date: "2022-08-01", wspd: 31.8 },
      { date: "2022-09-01", wspd: 28.7 },
      { date: "2022-10-01", wspd: 26.4 },
      { date: "2022-11-01", wspd: 25.8 },
      { date: "2022-12-01", wspd: 27.3 },
      { date: "2023-01-01", wspd: 28.0 },
      { date: "2023-02-01", wspd: 26.5 },
      { date: "2023-03-01", wspd: 25.0 },
      { date: "2023-04-01", wspd: 23.8 },
      { date: "2023-05-01", wspd: 28.2 },
      { date: "2023-06-01", wspd: 31.4 },
      { date: "2023-07-01", wspd: 33.0 },
      { date: "2023-08-01", wspd: 32.5 },
      { date: "2023-09-01", wspd: 29.2 },
      { date: "2023-10-01", wspd: 27.0 },
      { date: "2023-11-01", wspd: 26.5 },
      { date: "2023-12-01", wspd: 28.1 },
      { date: "2024-01-01", wspd: 29.3 },
      { date: "2024-02-01", wspd: 27.9 },
      { date: "2024-03-01", wspd: 26.6 },
      { date: "2024-04-01", wspd: 25.4 },
      { date: "2024-05-01", wspd: 29.0 },
      { date: "2024-06-01", wspd: 32.1 },
      { date: "2024-07-01", wspd: 34.2 },
      { date: "2024-08-01", wspd: 33.7 },
      { date: "2024-09-01", wspd: 30.5 }
      // you can continue with 2024-10,11,12 and 2025 when you get data
    ];

    const dates = data.map(d => d.date);
    const wspd = data.map(d => d.wspd);

    // Compute 12-month rolling average
    const roll = wspd.map((v,i) => {
      const start = Math.max(0, i - 11);
      const subset = wspd.slice(start, i + 1);
      const avg = subset.reduce((a,b)=>a+b,0) / subset.length;
      return parseFloat(avg.toFixed(2));
    });

    const trace1 = {
      x: dates,
      y: wspd,
      mode: 'lines+markers',
      name: 'Monthly Mean',
      line: {color:'steelblue'},
      marker: {size:4}
    };

    const trace2 = {
      x: dates,
      y: roll,
      mode: 'lines',
      name: '12-Month Moving Avg',
      line: {color:'darkorange', width:2}
    };

    const layout = {
      title: 'Wellington Monthly Mean Wind Speeds (km/h)',
      xaxis: { title: 'Year' },
      yaxis: { title: 'Wind Speed (km/h)' },
      legend: { orientation: 'h', x:0, y:1.1 }
    };

    Plotly.newPlot('chart', [trace1, trace2], layout);
  </script>
</body>
</html>
